/* =============================================================================
   
   üìÅ SEARCH.CSS ‚Äî –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
   
   –ß—Ç–æ –∑–¥–µ—Å—å:
   - –ü–∞–Ω–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (#globalSearchResults)
   - –≠–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ (.sr-item)
   - –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ (.is-active)
   - –ü—Ä–∏–≥–ª—É—à–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π –ø—Ä–∏ –ø–æ–∏—Å–∫–µ (body.search-active)
   - –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä—ã–∂–∫–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (.jump-flash)
   
   ============================================================================= */
/* === –ü–ê–ù–ï–õ–¨ –†–ï–ó–£–õ–¨–¢–ê–¢–û–í === */
#globalSearchResults.search-results {
  background: var(--popover-bg);
  color: var(--popover-fg);
  border: 1px solid var(--header-border);
  border-radius: 10px;
  max-height: min(60vh, 420px);
  overflow: auto;
  box-shadow: var(--shadow-1);
  padding: 6px;
}

/* üí° –í–Ω—É—Ç—Ä–∏ –ø–æ–ø–æ–≤–µ—Ä–∞ –≤–µ—Å—å —Ç–µ–∫—Å—Ç –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ popover-fg,
   —á—Ç–æ–±—ã –≤ –ª—é–±–æ–π —Ç–µ–º–µ –±—ã–ª –∫–æ–Ω—Ç—Ä–∞—Å—Ç */
#globalSearchResults .sr-item,
#globalSearchResults .sr-title,
#globalSearchResults .sr-path,
#globalSearchResults .sr-empty,
#globalSearchResults .sr-hint,
#globalSearchResults .sr-ico {
  color: var(--popover-fg);
}

/* –ú–µ—Ç–∫–∏ –ø—É—Ç–∏/–ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –∏–∫–æ–Ω–∫–∏ ‚Äî —á—É—Ç—å –ø—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–µ,
   –Ω–æ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —á–∏—Ç–∞–µ–º—ã–µ */
#globalSearchResults .sr-path,
#globalSearchResults .sr-hint {
  color: color-mix(in oklab, var(--popover-fg) 78%, transparent);
}

#globalSearchResults .sr-ico {
  color: color-mix(in oklab, var(--popover-fg) 88%, transparent);
}

/* === –°–ü–ò–°–û–ö === */
#globalSearchResults .sr-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

/* === –≠–õ–ï–ú–ï–ù–¢–´ === */
#globalSearchResults .sr-item {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 6px 10px;
  width: 100%;
  padding: 8px 10px;
  border: 0;
  background: transparent;
  text-align: left;
  cursor: pointer;
  border-radius: 8px;
}

#globalSearchResults .sr-item:hover {
  background: var(--menu-hover-bg);
}

#globalSearchResults .sr-title {
  font-weight: 600;
}

#globalSearchResults .sr-path {
  grid-column: 2;
  font-size: 12px;
}

/* –•–∏–Ω—Ç (–ø–æ–¥—Å–∫–∞–∑–∫–∞ –≤–Ω–∏–∑—É) */
#globalSearchResults .sr-hint {
  margin-top: 4px;
  padding: 6px 8px 2px;
  border-top: 1px solid var(--header-border);
  font-size: 12px;
}

/* –ü—É—Å—Ç–æ */
#globalSearchResults .sr-empty {
  padding: 10px 8px;
}

/* –ê–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è) */
#globalSearchResults .sr-item.is-active {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
  background: var(--menu-hover-bg);
}

/* === –ü–†–ò–ì–õ–£–®–ï–ù–ò–ï –°–ï–ö–¶–ò–ô –ü–†–ò –ü–û–ò–°–ö–ï === */
body.search-active .section {
  opacity: 0.35;
  transition: opacity 0.12s ease;
}

body.search-active .section[data-search-hit="1"] {
  opacity: 1;
  background: color-mix(in oklab, var(--accent) 6%, transparent);
  border-radius: var(--radius-md);
}

/* === –í–°–ü–´–®–ö–ê –¶–ï–õ–ò === */
.search-hit-flash {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
  transition: outline-color 0.8s ease;
}

.search-hit-flash {
  outline-color: transparent;
}

@keyframes jumpFlash {
  0% {
    box-shadow: 0 0 0 0 var(--accent);
  }
  100% {
    box-shadow: 0 0 0 12px transparent;
  }
}

.jump-flash {
  outline: 2px solid var(--accent);
  border-radius: 10px;
  animation: jumpFlash 900ms ease-out;
}

/* –ú–æ–±–∏–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –ø–æ–ø–æ–≤–µ—Ä–µ ‚Äî –≤—Å–µ–≥–¥–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–π –∏–Ω–ø—É—Ç */
.header-search-popover input[type="search"],
.header-search-popover input[type="text"],
#searchInputMobile {
  background: var(--header-bg);
  color: var(--ink-strong);
  border: 1px solid color-mix(in oklab, var(--ink-strong) 18%, transparent);
  border-radius: var(--radius-sm);
}

.header-search-popover input::placeholder,
#searchInputMobile::placeholder {
  color: color-mix(in oklab, var(--ink-strong) 55%, transparent);
}

/* –£–±–∏—Ä–∞–µ–º –Ω–∞—Ç–∏–≤–Ω—É—é —Å–∏–Ω—é—é –ª—É–ø—É —É search-–∏–Ω–ø—É—Ç–æ–≤ */
input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-results-button,
input[type="search"]::-webkit-search-results-decoration {
  -webkit-appearance: none;
}

/* FIX (Android/WebView too): make typed text readable in Search popover */
input[placeholder="Search title or URL"] {
  color: var(--ink, #111);
  -webkit-text-fill-color: var(--ink, #111);
}

input[placeholder="Search title or URL"]::placeholder {
  color: var(--muted, #6b7280);
}
/* FIX: typed text in Search input must stay readable –¥–∞–∂–µ –≤ Dark/Sea */
.search-popover input,
.search-popover input[type="search"],
.search-popover .search-input,
.global-search input,
#globalSearchInput {
  color: var(--ink-strong, #111) !important;
  -webkit-text-fill-color: var(--ink-strong, #111) !important;
  caret-color: var(--ink-strong, #111) !important;
}

/* placeholder –æ—Ç–¥–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª */
.search-popover input::placeholder,
.global-search input::placeholder,
#globalSearchInput::placeholder {
  color: var(--muted, #6b7280) !important;
}
